{
  "version": 3,
  "sources": ["../../../../node_modules/@okendo/shopify-hydrogen/dist/esm/index.js"],
  "sourcesContent": ["import t,{useRef as e,useEffect as n}from\"react\";const r=async({context:t,subscriberId:e,apiDomain:n,cdnDomain:r})=>{const o=`https://${n||\"api.okendo.io/v1\"}/stores/${e}/widget_plus_settings`,i=await fetch(o);if(!i.ok)return console.error(`Failed to retrieve subscriber settings for subscriber ID '${e}'.`),null;const{reviewsHeaderConfig:s,cssVariables:a,customCss:d,starSymbols:c}=await i.json(),l=await fetch(`https://${r||\"cdn-static.okendo.io\"}/reviews-widget-plus/js/okendo-reviews.js`);if(!l.ok)return console.error(\"Failed to retrieve widget initialisation script.\"),null;const p=await l.text(),{shop:{widgetPreRenderStyleTags:u}}=await t.storefront.query('#graphql\\n\\t\\tquery metafields {\\n\\t\\t\\tshop {\\n\\t\\t\\t\\twidgetPreRenderStyleTags: metafield(\\n\\t\\t\\t\\t\\tnamespace: \"okendo\"\\n\\t\\t\\t\\t\\tkey: \"WidgetPreRenderStyleTags\"\\n\\t\\t\\t\\t) {\\n\\t\\t\\t\\t\\tvalue\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t'),m=u?.value??\"\";return m||console.warn(\"Failed to retrieve pre-rendered widget style settings.\"),{reviewsHeaderConfig:s,cssVariables:a,customCss:d,initScriptContents:p,preRenderStyleTags:m,starSymbols:c}},o=({nonce:e=\"\",okendoProviderData:n,productUrlFormatter:r})=>{if(!n)return null;const{reviewsHeaderConfig:o,cssVariables:i,customCss:s,initScriptContents:a,preRenderStyleTags:d,starSymbols:c}=n,l=\"function\"==typeof r?r.toString():\"string\"==typeof r?r:\"(product) =>\\n\\t\\t\\t\\t\\tproduct && product.productHandle\\n\\t\\t\\t\\t\\t\\t? \\\"/products/\\\" + product.productHandle + \\\"/\\\" + (product.variantId ? '?variantId=' + product.variantId : '')\\n\\t\\t\\t\\t\\t\\t: undefined\",p=(i??\"\").replace('<style id=\"oke-css-vars\">',\"\").replace(\"</style>\",\"\"),u=s?s.replace('<style id=\"oke-reviews-custom-css\">',\"\").replace(\"</style>\",\"\"):\"\";return t.createElement(t.Fragment,null,t.createElement(\"script\",{nonce:e,id:\"oke-reviews-settings\",type:\"application/json\",dangerouslySetInnerHTML:{__html:JSON.stringify(o)}}),t.createElement(\"style\",{nonce:e,id:\"oke-css-vars\",dangerouslySetInnerHTML:{__html:p}}),u&&t.createElement(\"style\",{nonce:e,id:\"oke-reviews-custom-css\",dangerouslySetInnerHTML:{__html:u}}),a&&t.createElement(\"script\",{nonce:e,dangerouslySetInnerHTML:{__html:a}}),t.createElement(\"script\",{nonce:e,type:\"text/javascript\",dangerouslySetInnerHTML:{__html:`window.okeProductUrlFormatter = ${l.toString()}`}}),d&&t.createElement(\"div\",{dangerouslySetInnerHTML:{__html:d}}),c&&t.createElement(\"div\",{dangerouslySetInnerHTML:{__html:c}}))},i=({dataAttributes:r,metafieldContent:o=\"\"})=>{const i=e(null),s=()=>{i.current&&window.okeWidgetApi.initWidget(i.current)};return n((()=>(window.okeWidgetApi&&i.current?s():document.addEventListener(\"oke-script-loaded\",s),()=>{document.removeEventListener(\"oke-script-loaded\",s)})),[r]),t.createElement(\"div\",{ref:i,key:JSON.stringify(r),...r,dangerouslySetInnerHTML:o?{__html:o}:void 0})},s=/^[0-9]*$/;function a(t){if(t)return`shopify-${s.test(t)?t:t.split(\"/\").slice(-1)[0]}`}const d=({productId:e,okendoReviewsSnippet:n})=>{const r={\"data-oke-widget\":\"\",\"data-oke-reviews-product-id\":a(e)};return t.createElement(i,{dataAttributes:r,metafieldContent:n?.value})},c=({productId:e,okendoStarRatingSnippet:n})=>{const r={\"data-oke-star-rating\":\"\",\"data-oke-reviews-product-id\":a(e)};return t.createElement(i,{dataAttributes:r,metafieldContent:n?.value})},l='#graphql\\n\\tfragment OkendoStarRatingSnippet on Product {\\n\\t\\tokendoStarRatingSnippet: metafield(\\n\\t\\t\\tnamespace: \"okendo\"\\n\\t\\t\\tkey: \"StarRatingSnippet\"\\n\\t\\t) {\\n\\t\\t\\tvalue\\n\\t\\t}\\n\\t}\\n',p='#graphql\\n\\tfragment OkendoReviewsSnippet on Product {\\n\\t\\tokendoReviewsSnippet: metafield(\\n\\t\\t\\tnamespace: \"okendo\"\\n\\t\\t\\tkey: \"ReviewsWidgetSnippet\"\\n\\t\\t) {\\n\\t\\t\\tvalue\\n\\t\\t}\\n\\t}\\n';export{p as OKENDO_PRODUCT_REVIEWS_FRAGMENT,l as OKENDO_PRODUCT_STAR_RATING_FRAGMENT,o as OkendoProvider,d as OkendoReviews,c as OkendoStarRating,r as getOkendoProviderData};\n"],
  "mappings": ";;;;;;;;AAAA,mBAAyC;AAAQ,IAA0hC,IAAE,CAAC,EAAC,OAAMA,KAAE,IAAG,oBAAmBC,IAAE,qBAAoB,EAAC,MAAI;AAAC,MAAG,CAACA;AAAE,WAAO;AAAK,QAAK,EAAC,qBAAoBC,IAAE,cAAaC,IAAE,WAAUC,IAAE,oBAAmBC,IAAE,oBAAmB,GAAE,aAAYC,GAAC,IAAEL,IAAEM,KAAE,cAAY,OAAO,IAAE,EAAE,SAAS,IAAE,YAAU,OAAO,IAAE,IAAE;AAAA;AAAA;AAAA,oBAAiN,KAAGJ,MAAG,IAAI,QAAQ,6BAA4B,EAAE,EAAE,QAAQ,YAAW,EAAE,GAAE,IAAEC,KAAEA,GAAE,QAAQ,uCAAsC,EAAE,EAAE,QAAQ,YAAW,EAAE,IAAE;AAAG,SAAO,aAAAI,QAAE,cAAc,aAAAA,QAAE,UAAS,MAAK,aAAAA,QAAE,cAAc,UAAS,EAAC,OAAMR,IAAE,IAAG,wBAAuB,MAAK,oBAAmB,yBAAwB,EAAC,QAAO,KAAK,UAAUE,EAAC,EAAC,EAAC,CAAC,GAAE,aAAAM,QAAE,cAAc,SAAQ,EAAC,OAAMR,IAAE,IAAG,gBAAe,yBAAwB,EAAC,QAAO,EAAC,EAAC,CAAC,GAAE,KAAG,aAAAQ,QAAE,cAAc,SAAQ,EAAC,OAAMR,IAAE,IAAG,0BAAyB,yBAAwB,EAAC,QAAO,EAAC,EAAC,CAAC,GAAEK,MAAG,aAAAG,QAAE,cAAc,UAAS,EAAC,OAAMR,IAAE,yBAAwB,EAAC,QAAOK,GAAC,EAAC,CAAC,GAAE,aAAAG,QAAE,cAAc,UAAS,EAAC,OAAMR,IAAE,MAAK,mBAAkB,yBAAwB,EAAC,QAAO,mCAAmCO,GAAE,SAAS,IAAG,EAAC,CAAC,GAAE,KAAG,aAAAC,QAAE,cAAc,OAAM,EAAC,yBAAwB,EAAC,QAAO,EAAC,EAAC,CAAC,GAAEF,MAAG,aAAAE,QAAE,cAAc,OAAM,EAAC,yBAAwB,EAAC,QAAOF,GAAC,EAAC,CAAC,CAAC;AAAC;AAAp0E,IAAs0E,IAAE,CAAC,EAAC,gBAAe,GAAE,kBAAiBJ,KAAE,GAAE,MAAI;AAAC,QAAMC,SAAE,aAAAH,QAAE,IAAI,GAAEI,KAAE,MAAI;AAAC,IAAAD,GAAE,WAAS,OAAO,aAAa,WAAWA,GAAE,OAAO;AAAA,EAAC;AAAE,aAAO,aAAAF,WAAG,OAAK,OAAO,gBAAcE,GAAE,UAAQC,GAAE,IAAE,SAAS,iBAAiB,qBAAoBA,EAAC,GAAE,MAAI;AAAC,aAAS,oBAAoB,qBAAoBA,EAAC;AAAA,EAAC,IAAI,CAAC,CAAC,CAAC,GAAE,aAAAI,QAAE,cAAc,OAAM,EAAC,KAAIL,IAAE,KAAI,KAAK,UAAU,CAAC,GAAE,GAAG,GAAE,yBAAwBD,KAAE,EAAC,QAAOA,GAAC,IAAE,OAAM,CAAC;AAAC;AAA3sF,IAA6sF,IAAE;AAAW,SAAS,EAAEM,IAAE;AAAC,MAAGA;AAAE,WAAM,WAAW,EAAE,KAAKA,EAAC,IAAEA,KAAEA,GAAE,MAAM,GAAG,EAAE,MAAM,EAAE,EAAE,CAAC;AAAG;AAAC,IAA2L,IAAE,CAAC,EAAC,WAAUC,IAAE,yBAAwBC,GAAC,MAAI;AAAC,QAAM,IAAE,EAAC,wBAAuB,IAAG,+BAA8B,EAAED,EAAC,EAAC;AAAE,SAAO,aAAAE,QAAE,cAAc,GAAE,EAAC,gBAAe,GAAE,kBAAiBD,IAAG,MAAK,CAAC;AAAC;AAAtX,IAAwX,IAAE;",
  "names": ["e", "n", "o", "i", "s", "a", "c", "l", "t", "e", "n", "t"]
}
